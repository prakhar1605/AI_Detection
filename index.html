<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Content Verification Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .tab-button.active {
            border-color: #4f46e5;
            color: #4f46e5;
            background-color: #eef2ff;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900">AI Content Verification Tool</h1>
            <p class="mt-2 text-lg text-gray-600">A tool to help identify AI-generated text and understand the challenges of detecting deepfakes.</p>
        </header>

        <!-- Main Content -->
        <main class="bg-white rounded-xl shadow-lg">
            <!-- Tabs -->
            <div class="border-b border-gray-200">
                <nav class="flex -mb-px p-4 space-x-4" aria-label="Tabs">
                    <button id="tab-text" class="tab-button active text-lg font-medium py-3 px-5 rounded-lg border-b-2 border-transparent hover:border-gray-300 hover:text-gray-600 transition-all duration-200">
                        üìù Text Analysis
                    </button>
                    <button id="tab-image" class="tab-button text-lg font-medium py-3 px-5 rounded-lg border-b-2 border-transparent hover:border-gray-300 hover:text-gray-600 transition-all duration-200">
                        üñºÔ∏è Image Analysis
                    </button>
                    <button id="tab-video" class="tab-button text-lg font-medium py-3 px-5 rounded-lg border-b-2 border-transparent hover:border-gray-300 hover:text-gray-600 transition-all duration-200">
                        üìπ Video & Audio Analysis
                    </button>
                </nav>
            </div>

            <!-- Content Panels -->
            <div class="p-6 md:p-8">
                <!-- Text Analysis Panel -->
                <div id="content-text" class="panel-content">
                    <h2 class="text-2xl font-semibold mb-4">Analyze Text for AI Generation</h2>
                    <p class="mb-4 text-gray-600">Paste any text below. We'll use the Google Gemini model to analyze its characteristics (fluency, phrasing, complexity) and provide an assessment on whether it was likely AI-generated.</p>
                    
                    <div class="mb-4">
                        <textarea id="text-input" class="w-full h-48 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-shadow" placeholder="Paste text here..."></textarea>
                    </div>
                    
                    <div class="flex items-center justify-between">
                         <button id="analyze-button" class="bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            Analyze Text
                        </button>
                         <div id="api-key-container" class="w-1/2">
                              <input type="password" id="api-key-input" class="w-full p-2 border border-gray-300 rounded-lg" placeholder="Enter your Google Gemini API Key">
                              <a href="https://ai.google.dev/" target="_blank" class="text-sm text-indigo-600 hover:underline">Get your free API key from Google AI Studio.</a>
                         </div>
                    </div>

                    <!-- Result Display -->
                    <div id="result-container" class="mt-8 hidden">
                        <h3 class="text-xl font-semibold mb-4">Analysis Result</h3>
                        <div id="loader" class="flex items-center space-x-2 text-gray-500">
                            <svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                            <span>Analyzing... This may take a moment.</span>
                        </div>
                        <div id="result-content" class="hidden space-y-4"></div>
                        <div id="error-message" class="hidden p-4 bg-red-100 text-red-700 border border-red-200 rounded-lg"></div>
                    </div>
                </div>

                <!-- Image Analysis Panel -->
                <div id="content-image" class="panel-content hidden prose max-w-none">
                    <h2 class="text-2xl font-semibold mb-4">The Challenge of AI-Generated Image Detection</h2>
                    <p>Detecting AI-generated images (or "deepfakes") is a complex and ongoing battle between creators and detectors. Here's why it's so difficult to do in a simple web tool:</p>
                    <ul>
                        <li><strong>Massive Computational Power:</strong> State-of-the-art detection models are enormous and require powerful GPUs (Graphics Processing Units) to run. This is not feasible to offer for free in a browser or on a serverless platform.</li>
                        <li><strong>Rapid Advancements:</strong> AI image generators (like Midjourney, DALL-E, and Stable Diffusion) are evolving at an incredible pace. Each new version overcomes the flaws that detectors previously used to identify them.</li>
                        <li><strong>The "Cat-and-Mouse" Game:</strong> As soon as a reliable detection method is found, AI model creators adjust their systems to bypass it. This makes any single detection tool quickly obsolete.</li>
                    </ul>
                     <h3 class="font-semibold mt-6">How Can You Spot Them?</h3>
                    <p>While a perfect tool is elusive, you can still look for clues:</p>
                    <ul>
                        <li><strong>Unnatural Details:</strong> Look closely at hands (extra or missing fingers), teeth, eyes (reflections), and ears. These are often where models struggle.</li>
                        <li><strong>Inconsistent Lighting & Shadows:</strong> Check if the lighting on a person or object matches the background.</li>
                        <li><strong>Weird Textures:</strong> Skin that looks too smooth or plastic-like, or strange patterns in clothing or backgrounds.</li>
                        <li><strong>Reverse Image Search:</strong> Use Google Images or TinEye to see if the image or parts of it have appeared elsewhere online in a different context.</li>
                    </ul>
                     <h3 class="font-semibold mt-6">Professional Tools & Resources</h3>
                     <p>For high-stakes verification, professionals use specialized, often paid, services. Here are some resources to learn more:</p>
                     <ul>
                        <li><a href="https://www.trueflaw.com" target="_blank" rel="noopener noreferrer">Trueflaw</a></li>
                        <li><a href="https://www.sentinel-ai.com/" target="_blank" rel="noopener noreferrer">Sentinel AI</a></li>
                     </ul>
                </div>

                <!-- Video/Audio Analysis Panel -->
                <div id="content-video" class="panel-content hidden prose max-w-none">
                    <h2 class="text-2xl font-semibold mb-4">Video & Audio Deepfake Detection</h2>
                    <p>Video and audio deepfakes represent one of the most significant misinformation threats. They can convincingly impersonate individuals, creating highly believable but completely fabricated scenarios.</p>
                    <p>The challenges are even greater than with images:</p>
                    <ul>
                        <li><strong>Temporal Analysis:</strong> Detecting video deepfakes requires analyzing inconsistencies across many frames, demanding even more computational power than static images.</li>
                        <li><strong>Voice Cloning:</strong> AI can now clone a person's voice with just a few seconds of sample audio, making it possible to create audio of them saying anything.</li>
                        <li><strong>Lip Syncing:</strong> Advanced models can perfectly sync the lips of a person in a video to a cloned audio track.</li>
                    </ul>
                     <h3 class="font-semibold mt-6">Clues to Look For</h3>
                    <ul>
                        <li><strong>Unnatural Blinking:</strong> Early deepfakes often had strange or non-existent eye blinking patterns, though newer models have improved.</li>
                        <li><strong>Awkward Head Movements or Facial Expressions:</strong> Look for movements that don't quite match the tone of the speech.</li>
                        <li><strong>Blurring or Artifacts:</strong> Check for strange blurring or digital artifacts around the edges of the face, especially during fast movements.</li>
                        <li><strong>Flat Audio:</strong> Cloned audio may lack the subtle emotional intonations of a real human voice.</li>
                    </ul>
                    <p>Like image detection, reliable video and audio deepfake detection requires sophisticated, resource-intensive tools that are beyond the scope of a free web application.</p>
                </div>
            </div>
        </main>

        <footer class="text-center mt-8 text-gray-500">
            <p>&copy; 2025 Verification Tool. Built to promote digital literacy.</p>
        </footer>
    </div>

    <script>
        const tabs = {
            text: document.getElementById('tab-text'),
            image: document.getElementById('tab-image'),
            video: document.getElementById('tab-video'),
        };

        const contents = {
            text: document.getElementById('content-text'),
            image: document.getElementById('content-image'),
            video: document.getElementById('content-video'),
        };

        const analyzeButton = document.getElementById('analyze-button');
        const textInput = document.getElementById('text-input');
        const apiKeyInput = document.getElementById('api-key-input');
        const resultContainer = document.getElementById('result-container');
        const loader = document.getElementById('loader');
        const resultContent = document.getElementById('result-content');
        const errorMessage = document.getElementById('error-message');

        // Tab switching logic
        Object.keys(tabs).forEach(key => {
            tabs[key].addEventListener('click', () => {
                // Deactivate all tabs and hide all content
                Object.values(tabs).forEach(t => t.classList.remove('active'));
                Object.values(contents).forEach(c => c.classList.add('hidden'));

                // Activate clicked tab and show its content
                tabs[key].classList.add('active');
                contents[key].classList.remove('hidden');
            });
        });

        // Analyze button click logic
        analyzeButton.addEventListener('click', async () => {
            const textToAnalyze = textInput.value.trim();
            const apiKey = apiKeyInput.value.trim();

            if (!textToAnalyze) {
                showError("Please enter some text to analyze.");
                return;
            }
            
            if (!apiKey) {
                showError("Please enter your Google Gemini API key. You can get a free key from Google AI Studio.");
                return;
            }

            // Show loader and hide previous results
            resultContainer.classList.remove('hidden');
            loader.classList.remove('hidden');
            resultContent.classList.add('hidden');
            errorMessage.classList.add('hidden');

            try {
                const result = await analyzeWithGemini(textToAnalyze, apiKey);
                displayResult(result);
            } catch (error) {
                showError(`An error occurred: ${error.message}`);
                console.error(error);
            } finally {
                loader.classList.add('hidden');
            }
        });

        async function analyzeWithGemini(text, apiKey) {
            const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${apiKey}`;

            // This prompt instructs the model to act as an expert and return a structured JSON response.
            const prompt = `
                Analyze the following text to determine if it was likely generated by an AI.
                Provide a probability score (from 0 to 100) representing your confidence that it's AI-generated.
                Also, provide a brief, balanced, and non-technical explanation for your reasoning, considering factors like complexity, style, tone, common phrasing, and potential lack of personal voice or specific detail.
                Present your output as a single, clean JSON object with two keys: "score" (a number) and "explanation" (a string). Do not include any other text or markdown formatting around the JSON.

                Text to analyze:
                ---
                ${text}
                ---
            `;

            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
            };

            const response = await fetch(API_URL,. {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            if (!response.ok) {
                const errorBody = await response.json();
                throw new Error(errorBody.error.message || `Request failed with status ${response.status}`);
            }

            const data = await response.json();
            
            // Extract the text, which should be our JSON string
            const rawText = data.candidates[0].content.parts[0].text;
            
            // Clean the response in case the model adds markdown formatting
            const cleanedText = rawText.replace(/```json/g, '').replace(/```/g, '').trim();

            try {
                return JSON.parse(cleanedText);
            } catch (e) {
                console.error("Failed to parse JSON from model response:", cleanedText);
                throw new Error("The model returned an unexpected format. Please try again.");
            }
        }

        function displayResult(result) {
            resultContent.innerHTML = ''; // Clear previous results
            
            const score = result.score || 0;
            const explanation = result.explanation || "No explanation provided.";

            let bgColor = 'bg-green-100';
            let textColor = 'text-green-800';
            let borderColor = 'border-green-300';
            
            if (score > 50 && score <= 75) {
                bgColor = 'bg-yellow-100';
                textColor = 'text-yellow-800';
                borderColor = 'border-yellow-300';
            } else if (score > 75) {
                bgColor = 'bg-red-100';
                textColor = 'text-red-800';
                borderColor = 'border-red-300';
            }

            const scoreElement = document.createElement('div');
            scoreElement.className = `p-4 rounded-lg border ${bgColor} ${borderColor}`;
            scoreElement.innerHTML = `
                <div class="flex items-center justify-between">
                    <span class="font-semibold ${textColor}">Likelihood of being AI-Generated:</span>
                    <span class="text-2xl font-bold ${textColor}">${score}%</span>
                </div>
            `;

            const explanationElement = document.createElement('div');
            explanationElement.className = 'mt-4 p-4 bg-gray-100 border border-gray-200 rounded-lg';
            explanationElement.innerHTML = `
                <h4 class="font-semibold mb-2">Explanation:</h4>
                <p class="text-gray-700">${explanation}</p>
            `;
            
            resultContent.appendChild(scoreElement);
            resultContent.appendChild(explanationElement);
            resultContent.classList.remove('hidden');
        }

        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.classList.remove('hidden');
            resultContainer.classList.remove('hidden');
            resultContent.classList.add('hidden');
            loader.classList.add('hidden');
        }
    </script>
</body>
</html>
